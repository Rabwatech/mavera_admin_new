(()=>{var e={};e.id=816,e.ids=[816],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1813:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=a(50482),r=a(69108),n=a(62563),l=a.n(n),d=a(68300),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);a.d(t,i);let o=["",{children:["admin",{children:["finance",{children:["invoices",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,42424)),"/Users/amgedalmogahed/Documents/Rabwatech/Clients/Mavera/Web Project/mavera_admin_new/app/admin/finance/invoices/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,78062)),"/Users/amgedalmogahed/Documents/Rabwatech/Clients/Mavera/Web Project/mavera_admin_new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/amgedalmogahed/Documents/Rabwatech/Clients/Mavera/Web Project/mavera_admin_new/app/admin/finance/invoices/page.tsx"],x="/admin/finance/invoices/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/finance/invoices/page",pathname:"/admin/finance/invoices",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},59902:(e,t,a)=>{Promise.resolve().then(a.bind(a,93565))},93565:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95344),r=a(3729),n=a(66262),l=a(25545),d=a(65719);let i=(0,a(97075).Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var o=a(28765),c=a(6911),x=a(33733),m=a(37121),p=a(85674),u=a(62312),h=a(96885),y=a(78134),g=a(91470),b=a(22927);let v=()=>{let{t:e,direction:t}=(0,y.Z)(),[a,v]=(0,r.useState)("All"),[j,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(null),P=[{id:"INV-2024-001",client:"Al-Rajhi Wedding",amount:5e4,due:"2024-10-25",status:"Paid",method:"Mada",erp:"Synced",type:"STANDARD",paymentDate:"2024-10-23"},{id:"INV-2024-001-A",client:"Al-Rajhi Wedding",amount:8e3,due:"2024-11-15",status:"Unpaid",method:"Pending",erp:"Pending",type:"AMENDMENT",parentInvoiceId:"INV-2024-001"},{id:"INV-2024-002",client:"Golden Gala",amount:15e3,due:"2024-11-01",status:"Unpaid",method:"Pending",erp:"Pending",type:"STANDARD"},{id:"INV-2024-003",client:"Fahad & Sara",amount:5e3,due:"2024-10-20",status:"Overdue",method:"Pending",erp:"Pending",type:"STANDARD",overdueDays:10},{id:"DRAFT-004",client:"Corp Event #44",amount:2500,due:"-",status:"Draft",method:"-",erp:"-",type:"STANDARD"}],Z="All"===a?P:P.filter(e=>e.status===a),D=e=>{f(e)},M=e=>{A(e),w(!0)},S=e=>{confirm("Mark this invoice as paid manually?")&&alert(`Invoice ${e} marked as paid manually`)},_=e=>{switch(e){case"Paid":return(0,s.jsxs)("span",{className:"bg-emerald-50 text-emerald-600 px-2.5 py-0.5 rounded text-xs font-bold border border-emerald-100 flex items-center gap-1 w-fit",children:[s.jsx(n.Z,{size:12})," Paid"]});case"Unpaid":return(0,s.jsxs)("span",{className:"bg-amber-50 text-amber-600 px-2.5 py-0.5 rounded text-xs font-bold border border-amber-100 flex items-center gap-1 w-fit",children:[s.jsx(l.Z,{size:12})," Unpaid"]});case"Overdue":return(0,s.jsxs)("span",{className:"bg-rose-50 text-rose-600 px-2.5 py-0.5 rounded text-xs font-bold border border-rose-100 flex items-center gap-1 w-fit",children:[s.jsx(d.Z,{size:12})," Overdue"]});case"Draft":return s.jsx("span",{className:"bg-gray-100 text-gray-500 px-2.5 py-0.5 rounded text-xs font-bold border border-gray-200 flex items-center gap-1 w-fit",children:"Draft Add-on"});default:return null}};return(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-mavera-navy",children:e("nav.invoices")}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Revenue operations and payment gateway links."})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[s.jsx("div",{className:"bg-white p-1 rounded-xl shadow-sm border border-gray-200 flex gap-1 w-full sm:w-auto overflow-x-auto",children:["All","Unpaid","Paid","Overdue","Draft"].map(e=>s.jsx("button",{onClick:()=>v(e),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap ${a===e?"bg-mavera-navy text-white shadow":"text-gray-500 hover:bg-gray-50"}`,children:e},e))}),(0,s.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(b.Z,{permission:"finance.create_invoice",children:(0,s.jsxs)("button",{className:"flex items-center gap-2 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-xl text-sm font-bold hover:border-mavera-gold hover:text-mavera-navy transition-colors whitespace-nowrap",children:[s.jsx(i,{size:16}),"Manual Entry"]})}),(0,s.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[s.jsx("input",{type:"text",placeholder:"Search Invoice #...",className:`w-full py-2 bg-white border border-gray-200 rounded-xl text-sm outline-none focus:border-mavera-gold ${"rtl"===t?"pl-10 pr-4":"pl-4 pr-10"}`}),s.jsx(o.Z,{size:16,className:`absolute top-2.5 text-gray-400 ${"rtl"===t?"left-3":"right-3"}`})]})]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm min-w-[1200px]",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-500 font-medium",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-start",children:"Invoice #"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Client"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Amount"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Due Date"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Payment Method"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Payment Date"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-start",children:"ERP Sync"}),s.jsx("th",{className:"px-6 py-4 text-end",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-50",children:Z.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors group",children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[s.jsx("span",{className:"font-mono font-bold text-gray-600",children:e.id}),e.parentInvoiceId&&(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(c.Z,{size:10,className:"text-gray-400"}),s.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:e.parentInvoiceId})]})]}),s.jsx("td",{className:"px-6 py-4 font-bold text-mavera-navy",children:e.client}),s.jsx("td",{className:"px-6 py-4",children:"AMENDMENT"===e.type?s.jsx("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-600 border border-purple-200 rounded text-xs font-bold",children:"Amendment"}):s.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 rounded text-xs font-bold",children:"Standard"})}),(0,s.jsxs)("td",{className:"px-6 py-4 font-mono text-mavera-navy",children:[e.amount.toLocaleString()," SAR"]}),s.jsx("td",{className:"px-6 py-4 text-gray-500",children:e.due}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:e.method})}),s.jsx("td",{className:"px-6 py-4",children:e.paymentDate?s.jsx("span",{className:"text-sm text-gray-600",children:new Date(e.paymentDate).toLocaleDateString()}):s.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[_(e.status),e.overdueDays&&"Overdue"===e.status&&(0,s.jsxs)("span",{className:"text-[10px] text-red-600 block mt-1 font-bold",children:[e.overdueDays," days overdue"]})]}),s.jsx("td",{className:"px-6 py-4",children:"Synced"===e.erp?(0,s.jsxs)("span",{className:"text-emerald-600 text-xs font-bold flex items-center gap-1",children:[s.jsx(x.Z,{size:12})," Synced"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-gray-400 text-xs flex items-center gap-1",children:[s.jsx(l.Z,{size:12})," Pending"]}),s.jsx(b.Z,{permission:"finance.sync_erp",children:s.jsx("button",{className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded font-bold hover:bg-blue-100",children:"Sync"})})]})}),s.jsx("td",{className:"px-6 py-4 text-end",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsxs)(b.Z,{permission:"finance.manage_invoices",children:["Paid"===e.status&&"STANDARD"===e.type&&(0,s.jsxs)("button",{onClick:()=>M(e.id),className:"flex items-center gap-1 px-3 py-1.5 text-purple-600 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold",title:"Create Amendment Invoice",children:[s.jsx(m.Z,{size:14})," Amendment"]}),("Unpaid"===e.status||"Overdue"===e.status)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>D(e),className:"flex items-center gap-1 px-3 py-1.5 text-mavera-gold bg-mavera-gold/10 rounded-lg hover:bg-mavera-gold hover:text-white transition-colors text-xs font-bold",title:"Generate Payment Link",children:[s.jsx(p.Z,{size:14})," Link"]}),(0,s.jsxs)("button",{onClick:()=>S(e.id),className:"flex items-center gap-1 px-3 py-1.5 text-green-600 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-xs font-bold",title:"Mark as Paid Manually",children:[s.jsx(u.Z,{size:14})," Mark Paid"]})]})]}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-mavera-navy bg-gray-50 hover:bg-gray-200 rounded-lg transition-colors",title:"Download PDF",children:s.jsx(h.Z,{size:16})})]})})]},e.id))})]})})}),s.jsx(g.Z,{isOpen:!!j,onClose:()=>f(null),invoice:j}),N&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>w(!1)}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[(0,s.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100",children:[s.jsx("h2",{className:"text-xl font-bold text-mavera-navy",children:"Create Amendment Invoice"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Add additional costs to contract ",k]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"Description"}),s.jsx("input",{type:"text",placeholder:"e.g., Additional decorations",className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:border-mavera-gold focus:ring-2 focus:ring-mavera-gold/20 outline-none"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"Amount (SAR)"}),s.jsx("input",{type:"number",placeholder:"0",className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:border-mavera-gold focus:ring-2 focus:ring-mavera-gold/20 outline-none"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"Due Date"}),s.jsx("input",{type:"date",className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:border-mavera-gold focus:ring-2 focus:ring-mavera-gold/20 outline-none"})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 text-gray-700 hover:bg-gray-100 rounded-xl font-medium transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{alert("Amendment invoice created!"),w(!1)},className:"px-6 py-2.5 bg-mavera-gold text-white rounded-xl font-bold hover:bg-mavera-goldHover transition-all",children:"Create Amendment"})]})]})})]})]})}},91470:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var s=a(95344),r=a(3729),n=a(14513),l=a(97075);let d=(0,l.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var i=a(66262),o=a(1960);let c=(0,l.Z)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),x=({isOpen:e,onClose:t,invoice:a})=>{let[l,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)("");return((0,r.useEffect)(()=>{if(e&&a){x(!0);let e=setTimeout(()=>{p(`https://checkout.riyadbank.com/pay/token_${Math.random().toString(36).substr(2,9)}`),x(!1)},1500);return()=>clearTimeout(e)}},[e,a]),e&&a)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-mavera-navy/60 backdrop-blur-sm transition-opacity",onClick:t}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-up",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[s.jsx("h3",{className:"font-bold text-mavera-navy",children:"Payment Link"}),s.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-red-500",children:s.jsx(n.Z,{size:20})})]}),s.jsx("div",{className:"p-8 text-center min-h-[300px] flex flex-col justify-center",children:l?(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(d,{size:48,className:"text-mavera-gold animate-spin"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Contacting Riyad Bank Gateway..."})]}):(0,s.jsxs)("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(i.Z,{size:32})}),s.jsx("h4",{className:"text-lg font-bold text-mavera-navy mb-1",children:a.client}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm mb-6",children:["Amount Due: ",(0,s.jsxs)("span",{className:"font-bold text-mavera-navy",children:[a.amount.toLocaleString()," SAR"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-xl p-3 mb-6",children:[s.jsx("code",{className:"flex-1 text-xs text-gray-600 font-mono truncate",children:m}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m),alert("Payment link copied to clipboard!")},className:"p-2 text-mavera-gold hover:bg-white rounded-lg transition-colors shadow-sm",children:s.jsx(o.Z,{size:16})})]}),s.jsx("div",{className:"flex gap-3",children:(0,s.jsxs)("button",{className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/20 transition-all",children:[s.jsx(c,{size:18}),"Send via WhatsApp"]})})]})})]})]}):null}},22927:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(95344);a(3729);var r=a(23096);let n=({permission:e,children:t,fallback:a=null})=>(0,r.gI)(e)?s.jsx(s.Fragment,{children:t}):s.jsx(s.Fragment,{children:a})},62312:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},25545:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1960:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},85674:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},96885:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},33733:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},28765:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},65719:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(97075).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},42424:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let s=(0,a(86843).createProxy)(String.raw`/Users/amgedalmogahed/Documents/Rabwatech/Clients/Mavera/Web Project/mavera_admin_new/app/admin/finance/invoices/page.tsx`),{__esModule:r,$$typeof:n}=s,l=s.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,802,400],()=>a(1813));module.exports=s})();